<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
        /* Promise 的狀態:
            1. 處理中 -> pending
            2. 成功處理 -> resolve()
            3. 處理失敗 -> reject() 發生錯誤
        
        */
        const p1 = new Promise((resolve, reject) => {  // resolve, reject -> reference of function
            setTimeout(() => {
                resolve('Hello');
                // reject('發生錯誤 A');
            }, 1000)
        })

        console.log(1, new Date());

        // p1.then(result => {
        //     console.log(2, new Date());
        //     console.log(result);
        //     return 'Happy';

        // })

        // .then(a => {
        //     console.log(5, new Date());
        //     console.log(`${a}`);
        // })

        p1.then(result => {
            console.log("1", result);

            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    // resolve('Hi');
                    reject('發生錯誤 B');
                }, 2000);
            })
        })
        .then(result => {
            console.log("2", result);

        })

        .catch(ex => {   // 不要加 p1 -> p1.catch() -> 若 then1 沒有執行會 error
            console.log(`{${ex}}`);
            console.log(4, new Date());
        }) 
        
        console.log(3, new Date());
    </script>
</body>
</html>